<!doctype html>
<html lang="zh" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-column">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="SREWorks RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="SREWorks Atom Feed">




<meta name="aes-config" content="pid=xux-opensource&amp;user_type=101&amp;uid=&amp;username=&amp;dim10=sreworks">
<link rel="alternate" type="application/rss+xml" href="/column/rss.xml" title="SREWorks RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/column/atom.xml" title="SREWorks Atom Feed"><title data-rh="true">Blog | SREWorks</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sreworks.opensource.alibaba.com//column"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="keywords" content="sreworks 官方,sreworks官方文档,SREWorks,SREWorks官网,SRE works,SREworks,srework,srewoks,sreworks,srework,sre文档,sre-works,sre official,sre_works,云原生运维,大数据运维,阿里运维,云原生k8s,智能运维,数智运维,简单运维,高效运维,appmaniger,一站式运维,saas运维"><meta data-rh="true" property="og:title" content="Blog | SREWorks"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sreworks.opensource.alibaba.com//column"><link data-rh="true" rel="alternate" href="https://sreworks.opensource.alibaba.com//column" hreflang="en"><link data-rh="true" rel="alternate" href="https://sreworks.opensource.alibaba.com//zh/column" hreflang="zh"><link data-rh="true" rel="alternate" href="https://sreworks.opensource.alibaba.com//column" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.65d9ebcd.css">
<link rel="preload" href="/assets/js/runtime~main.17fdd7ba.js" as="script">
<link rel="preload" href="/assets/js/main.29991fa4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>

<script src="//g.alicdn.com/alilog/mlog/aplus_v2.js" id="beacon-aplus" exparams="clog=o&amp;aplus&amp;sidx=aplusSidx&amp;ckx=aplusCkx"></script>
<script src="//g.alicdn.com/aes/??tracker/1.0.34/index.js,tracker-plugin-pv/2.4.5/index.js,tracker-plugin-event/1.2.5/index.js,tracker-plugin-jserror/1.0.13/index.js,tracker-plugin-api/1.1.14/index.js,tracker-plugin-perf/1.1.8/index.js,tracker-plugin-eventTiming/1.0.4/index.js"></script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/sreworks.png" alt="sreworks Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/sreworks.png" alt="sreworks Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">SREWorks</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/iwa896">常见问题</a><a class="navbar__item navbar__link" href="/blog">博客</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/column">专栏</a><a href="https://wj.qq.com/s2/10565748/53da/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">在线体验<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/">v1.3</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/">Next</a></li><li><a class="dropdown__link" href="/docs/">v1.3</a></li><li><a class="dropdown__link" href="/docs/v1.2/">v1.2</a></li><li><a class="dropdown__link" href="/docs/v1.1/">v1.1</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">简体中文</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="https://sreworks.cn/">简体中文</a></li><li><a class="dropdown__link" href="https://sreworks.opensource.alibaba.com/">English</a></li></ul></div><a href="https://github.com/alibaba/sreworks" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/column/barsmz880p6lg0vz">当我们在谈论DataOps时，我们到底在谈论什么</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/column/tpx7u2">SREWorks前端低代码工程设计概览</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/column/xsn02u">基于Elasticsearch生长的SREWorks数据化运维体系</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/column/barsmz880p6lg0vz">当我们在谈论DataOps时，我们到底在谈论什么</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-01-16T20:44:11.000Z" itemprop="datePublished">2023年1月16日</time> · <!-- -->阅读需 22 分钟</div></header><div class="markdown" itemprop="articleBody"><a name="dxOcg"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-dataops到底是什么">1. DataOps到底是什么？<a class="hash-link" href="#1-dataops到底是什么" title="标题的直接链接">​</a></h2><p>伴随着全球数字化转型的高速发展，在云计算、物联网、5G、边缘计算、元宇宙等新技术的驱动下，数据爆炸的时代已经来临。IDC Global DataSphere显示，2021年，全球数据总量达到了84.5ZB，预计到2026年，全球结构化与非结构化数据总量将达到221.2ZB。<br>此外，在《数字化转型架构：方法论和云原生实践》一书中也提到云原生应用平台的发展将经历DevOps—DataOps—AIOps的演进路径，可以看出在云原生的浪潮下，企业也越来越需要数据。但在面对数据量巨大、数据种类繁多、数据急剧增长的困境时，对企业驾驭数据的能力也提出更高的要求。如果不能对海量数据进行合理有序的组织和管理，非但不能产生数据价值，反而会对企业造成极大的负担，从某种程度上来说，也是一种“数据灾难”，而这也是DataOps一直处于热门话题的原因。在开源SREWorks项目数据化建设过程中，我们也一直在思考：DataOps到底是在做什么？<br>在讨论DataOps之前，我们先来看下DevOps。DevOps是一种软件交付管理的思想，它追求一种敏捷的、规范的、跨团队的软件研发协作状态，力求将一套软件的开发模式，从小作坊形态演变成一条标准的生产流水线。DevOps在一定程度上为DataOps的发展奠定了基础，因此，DevOps是我们在讨论DataOps时绕不开的重要话题。<br>DataOps本身也是属于敏捷开发范畴，类似DevOps以较短的开发迭代周期快速满足各自的需求，同时DataOps也需要大量标准化数据工具或组件，依赖团队之间协作，进行数据的开发和分析。与DevOps不同的是DataOps主要专注于数据流，<strong>因此，通过数据化的方法或方法论来推动企业运营水平的提升都可以隶属于DataOps的范畴。</strong></p><p><img loading="lazy" alt="image.png" src="/assets/images/1673901865572-31e383be-4316-4043-8717-760df8131f47-716e327566c341f6bc1c03cd938dbaa6.png" width="1507" height="490" class="img_ev3q"></p><p>DataOps 是 data operationalization的缩写，DataOps 不单单指数据技术的工具和平台，更重要的是一套数据全生命周期管理的方法论和思想。基于数据驱动，通过一系列面向流程的工具和平台，将DataOps思想进行工程化落地实践，能够将所有系统的相关数据采集起来，打破数据孤岛，统一建设高效规范的数据模型和数据体系，深度挖掘数据价值。<br>DataOps的方法论和思想主要是被分析和数据团队使用，旨在简化数据使用、降低数据分析门槛，提高数据分析质量、缩短数据分析周期。也就是说，数据作为一种大数据时代的“新能源”，本身是需要通过平台化的能力， 实现围绕“数据集成、数据开发、数据存储、数据治理以及数据服务”等体系化的数据管理流程。更进一步，基于数据驱动的思想，进行数据分析和数据消费，通过数据赋能，做好各个业务领域的相关工作，真正解决实际生产过程中遇到的痛点问题，实现数据价值落地的场景化输出。</p><p><img loading="lazy" alt="image.png" src="/assets/images/1673901865690-7c0fe709-66d5-435d-8932-4b1ea88faf5b-c832fb06b8758a8c6e02ba3e5ed98db9.png" width="1146" height="762" class="img_ev3q"></p><a name="clUt1"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-dataops能够解决哪些问题">2. DataOps能够解决哪些问题？<a class="hash-link" href="#2-dataops能够解决哪些问题" title="标题的直接链接">​</a></h2><p>下面列举一些常见的数据相关的问题，对于想要实施DataOps的公司来讲，可以判断一下是否有遇到：</p><ol><li>如何确保生产的数据质量？</li><li>如何判断生产的数据能否满足业务的需求？</li><li>如何判断某个数据型项目工程的价值并持续投入？</li><li>如何寻找大数据人才？</li><li>如何提高数据处理的性能？</li><li>大数据方案采用什么技术栈？</li><li>大数据方案的运维稳定性如何保障？</li><li>引入了多个大数据方案，如何统一进行管理？</li><li>大数据的数据权限如何管理？</li><li>数据分析结果如何指导最终的决策？</li></ol><p>上面常见的问题，可以归为三大场景：数据管理、数据运维和数据使用。通常实施数据化的公司都是在初期尝到了一些数据带来的甜头，但是在持续投入之后，却又发现这块的收益产出似乎带有很大的不确定性：数据表逐渐地被杂乱的数据堆满，数据产出链路常常延迟，而通过数据分析进行决策似乎也没像之前那么有效了。<br>简而言之，当数据量变大，数据工程变复杂之后，如果没有规范的体系和流程，整体的协作关系又容易变回小作坊形态，存在诸如数据计算口径不统一、数据重复建设以及数据质量不高等问题，需要寻求一些标准化、规范化、体系化、工程化的方式来进行解决。</p><a name="LgBMU"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-如何进行dataops实践">3. 如何进行DataOps实践？<a class="hash-link" href="#3-如何进行dataops实践" title="标题的直接链接">​</a></h2><p>正如前文所说，DataOps本身是一套完整的数据体系建设的方法论，其目标是能够让数据持续用起来，实现“数据集成、数据开发、数据存储、数据治理以及数据服务”等数据管理能力。这也意味着需要依赖众多的数据技术或数据组件来建设和运营DataOps数据平台，进而形成高效可靠的数据资产化体系和数据服务化能力，也即针对Data的数据运维。</p><a name="Z6CI1"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据集成">数据集成<a class="hash-link" href="#数据集成" title="标题的直接链接">​</a></h3><p>数据集成是构建企业级DataOps数据平台的第一步，依赖企业内部的跨部门协作，能够将不同来源的数据（不同的业务系统）以及不同类型的数据（结构化、半结构化、非结构化、离线以及实时数据等）进行整合，实现互联互通。从源头上避免数据的重复造轮和资源浪费问题，为构建规范化的数据体系、沉淀数据资产以及挖掘数据价值作准备。<br>数据集成一般是通过数据引入方式，将一个系统的数据按时按量集成到另一个系统中。通常采用ELT(Extract-Load-Transform，提取-加载-转换)的模式，重点在于数据汇聚，即将数据提取后直接加载到目标端存储中，这个阶段一般不做或者只做简单的数据清洗和数据处理。业界优秀的数据集成工具包括像Sqoop、DataX、Kettle、Canal以及StreamSets等。</p><a name="uY1wI"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据开发">数据开发<a class="hash-link" href="#数据开发" title="标题的直接链接">​</a></h3><p>数据开发的目标是能够将数据集成阶段的原始数据，按照业务的需求进行加工处理、将原始的低业务价值的数据转换成高业务价值的数据资产，也就是说数据开发阶段是实现数据资产化的核心技术手段。<br>数据开发作为数据加工处理的核心阶段，通常会采用ETL(Extract-Transform-Load，提取-转换-加载)的模式并集成一系列的数据开发管控流程和工具，方便数据开发人员对ETL任务的编写、构建、发布、运维以及任务资源管控等，提升效率。通常数据开发主要分成离线数据开发和实时数据开发两大场景。<br>离线数据开发主要用于离线数据的批量定时加工处理，离线数据开发需要包含离线计算引擎、作业开发、任务调度、数据管控以及运维监控等核心能力，实际使用过程中，相关的离线ETL任务会按照预先设定的加工逻辑和ETL之间的拓扑依赖关系，进行调度执行。常见的离线处理框架包括MapReduce、Hive以及Spark等。在阿里巴巴内部也早已形成体系的MaxCompute通用大数据开发套件，快速解决用户的海量数据离线计算问题，有效降低企业成本并保障数据安全等。<br>实时数据开发主要涉及对实时流式数据的加工处理，满足像监控告警、数据大屏等对实时性要求较高的场景。在实时计算场景下，业务系统每产生一条数据，都会通过消息中间件（比如Kafka）被实时发送到流式处理平台进行加工处理，不再依赖调度引擎。常见的流式处理框架包括Storm、Spark Streaming以及Flink等。在阿里巴巴内部也基于Apache Flink构建了一站式的实时大数据分析平台，提供端到端的亚秒级实时数据加工处理分析能力。</p><a name="rt00L"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据存储">数据存储<a class="hash-link" href="#数据存储" title="标题的直接链接">​</a></h3><p>有了数据集成和数据开发的能力，下一阶段就是考虑如何进行数据存储和数据组织，其核心是标准规范的数据仓库和数据模型建设，也就是说数据仓库是实现数据资产化的呈现载体。<br>目前用的最多的数据建模方式是维度建模，典型代表有阿里巴巴建设的“OneData”数据建模体系，主要包括数据规范定义、数据模型设计以及ETL开发规范三部分。<br>数据规范定义：数据主题域、业务过程、指标规范、名词定义以及时间周期等命名规范。<br>数据模型设计：模型层次划分(分成数据引入层ODS、数据公共层CDM以及数据应用层ADS三层，其中CDM层又包括明细数据层DWD、汇总数据层DWS和维度数据层DIM)、模型设计原则、模型命名规范、模型生命周期管理以及数据质量规范等。<br>ETL开发规范：数据处理作业的研发流程、编码规范以及发布运维原则等。</p><p><img loading="lazy" src="/assets/images/1673273821491-997ab2cf-9b88-4f34-8330-fb8045f3e640.jpeg-4343b99091993727a2d44cb45173f9ee.png" width="2027" height="2209" class="img_ev3q"><br>数据仓库实施工作流（来源：《大数据之路》）</p><p><img loading="lazy" src="/assets/images/1673343267505-b3a4611f-f424-4151-9f90-c075aaaa20cb.jpeg-2984161d934e8c21a95c18ed9010260e.png" width="2929" height="1016" class="img_ev3q"><br>数据仓库建设工程链路（离线链路+实时链路）</p><a name="eaqgP"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据治理">数据治理<a class="hash-link" href="#数据治理" title="标题的直接链接">​</a></h3><p>数据治理主要是对数据资产，配置数据管理策略，主要包括数据标准、数据质量、数据成本以及数据安全等内容。通过多维度进行量化评估，针对数据建设提出改进与优化建议，确保数据质量、标准、安全、易用。它包含以下功能：</p><ul><li>数据标准化管理：负责数据仓库中数据的表达、格式以及定义的规范性，包括模型规范、数仓元数据规范、名词术语规范、指标规范等进行管理，针对未标准化的内容提出改进建议。</li><li>数据成本：主要从存储量和访问情况等沉淀相关治理项，比如：空表、无效表（未关联ETL任务表）、长期未访问表、长周期表、大数据量表等，通过对治理项的运作，提出优化建议，推动数据开发人员进行成本治理。</li><li>数据质量：围绕数据的完整性、准确性、一致性、有效性和及时性五个维度并对数据的重要性进行资产等级划分，对质量保障既包括事前保障，比如数据开发流程、数据标准执行等，又有事中保障，比如DQC的数据质量实时监控和告警，还有事后保障，比如数据质量故障复盘，确定质量问题根因等。</li><li>数据安全：评估数据安全风险，对数据设定安全等级，包括支持安全认证和权限管理、资源隔离、数据加密、数据脱敏等，保障数据安全可靠的被传输、存储和使用。<a name="w4y8o"></a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据服务">数据服务<a class="hash-link" href="#数据服务" title="标题的直接链接">​</a></h3><p>数据服务旨在提供统一的数据消费服务总线，能够将数据资产生成API服务，其目标是把数据服务化，让数据能够快速集成到业务场景当中，发挥数据平台的价值。它包含以下主要功能：</p><ul><li>异构跨库查询：如果数据分布在多个异构数据库时，用户无法简单的实现数据关联查询，通过数据查询服务，可以减少数据同步作业，直接实现从多个源数据库加载数据与完成查询的能力。</li><li>数据API 定义与管理：部份常用的数据点查或统计分析，可通过定义数据集与API名称，并最终暴露为一个HTTP资源路径的方式，并对数据API进行发布和访问授权，方便在各类脚本或代码中使用数据。</li><li>数据缓存：对于常用的数据查询，可定义缓存与更新策略，来减少数据查询穿透到数据库，提高性能并降低对数据库的性能负载。</li><li>服务编排：按照业务逻辑，以串行、并行和分支等结构编排多个API及函数服务为工作流。<a name="sFcux"></a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据应用">数据应用<a class="hash-link" href="#数据应用" title="标题的直接链接">​</a></h3><p>有了标准化的数据体系以后，针对数据进行分析和使用又是DataOps所关心的另一个维度的问题，这也是数据驱动的关键环节，也即以数据为中心进行决策，驱动业务行为。数据分析人员利用各种数据统计分析方法和智能算法，通过数据平台提供的数据服务API，对相关数据进行多维度、深层次的分析挖掘，支撑业务相关的数据应用场景，持续让数据用起来，真正发挥数据平台的业务价值。<br>不同的业务有各自的应用场景，所以这一部分很难面面俱到。本文仅简单介绍几种常见的数据应用场景，希望能帮助大家更好的理解，如何基于数据平台的数据资产和数据服务，进行数据分析和使用。<br><strong>数据大屏</strong>：通过对数据进行分析计算，借助BI类软件，结合业务需求，以图表等形式，把一些关键的汇总性数据展示出来，实现数据可视化，为业务决策提供准确可靠的数据支持。<br><strong>智能场景</strong>：属于AIOps范畴，基于数据平台的数据，通过AI算法，从数据中进行提炼、挖掘、洞察，为业务基于数据进行决策和运维运营时提供智能能力，获得更有前瞻性的数据支持。比较典型的智能应用场景包括像智能推荐、智能客服、智能预测以及健康管理等等。<br>当然，数据分析也并不是数据的终点，因为随着数据的沉淀，业务规模的扩大，很多数据分析的结果也可能会作为另一个更高维度模型的数据输入，被纳入数据平台的数据资产当中。因此，数据分析和开发人员需要从一个更高的维度和视角，去整合海量的数据。这也就意味着数据处理的链路并不是一成不变的，数据量会随着业务不断增长，数据模型也同样需要不断演进。</p><p><img loading="lazy" alt="image.png" src="/assets/images/1673901865728-6fe2c7ea-463f-4d18-8a49-425f7c147e62-06dd9a29a6b26d31140c85d3e80fbbfa.png" width="1692" height="884" class="img_ev3q"></p><a name="X59GT"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-总结">4. 总结<a class="hash-link" href="#4-总结" title="标题的直接链接">​</a></h2><p>总的来说，<strong>DataOps 作为一种数据管理方式，利用 DevOps 方法论对数据的全生命周期进行管理，通过数据平台把数据变成一种服务能力，进而提升数据的使用效率，实现数据持续用起来的目标。</strong>以数据平台为承载，以数据场景为驱动，支持更大的创新空间和更优秀的业务模式。<br>SREWorks云原生数智运维平台，沉淀了阿里大数据运维团队近十年经内部业务锤炼的SRE数智化工程实践，包含DataOps在运维领域的最佳实践，欢迎体验。我们旨在秉承“数据化、智能化”运维思想，帮助更多的从业者采用“数智”思想做好运维。</p><p><strong><em>参考材料</em></strong><br><a href="https://www.synopsys.com/blogs/software-security/agile-cicd-devops-difference/" target="_blank" rel="noopener noreferrer">https://www.synopsys.com/blogs/software-security/agile-cicd-devops-difference/</a><br><a href="https://zhuanlan.zhihu.com/p/55066486" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/55066486</a><br><a href="http://www.uml.org.cn/bigdata/202108115.asp" target="_blank" rel="noopener noreferrer">http://www.uml.org.cn/bigdata/202108115.asp</a><br><a href="https://en.wikipedia.org/wiki/DataOps" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/DataOps</a><br><a href="https://www.tamr.com/blog/from-devops-to-dataops-by-andy-palmer/" target="_blank" rel="noopener noreferrer">https://www.tamr.com/blog/from-devops-to-dataops-by-andy-palmer/</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/column/tpx7u2">SREWorks前端低代码工程设计概览</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-08-24T07:05:17.000Z" itemprop="datePublished">2022年8月24日</time> · <!-- -->阅读需 25 分钟</div></header><div class="markdown" itemprop="articleBody"><a name="OfOTG"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="引子">引子<a class="hash-link" href="#引子" title="标题的直接链接">​</a></h2><p>&quot;低代码&quot;一词似乎是最近几年才流行起来的词汇，2015年前后AWS、Google、Oracle等厂商开始入局低代码领域时，国内氛围还没有很高。2018年5月，快速应用开发的低代码平台 OutSystems 获得 3.6 亿美金投资；同年8月，西门子宣布以 6 亿欧元收购低代码应用开发厂商 Mendix; 此后，越来越多的企业开始尝试以低代码/零代码技术重构数字化业务，低代码平台市场逐步火爆起来。<br>其实低代码开发并非新生事物，据可考的资料，低代码概念最早诞生于上世纪80年代IBM的快速应用程序开发工具(RAD)；后来微软的VB、C#可视化开发工具Visual Studio，谷歌的Android集成开发工具Android Studio等都是对其概念的工程实践。低代码本质上还是一种软件开发方式：即不写代码或少写代码的方式来完成软件开发。<br>于前端而言，低代码开发其实也并不陌生，把“低代码”描述为“页面可视化编辑”，这一概念就变得熟悉了起来，我们曾经使用过的Dreamweaver、Frontpage等其实都可以归属到低代码的范畴。随着Angular、React、Vue等前端框架的普及以及gulp，webpack等构建工具的完善，前端进入工程化协作开发时代，逐步开始承载越来越多的业务逻辑。<br>当前云原生开发火热，在容器化微服务化技术加持下，传统意义的后端开发瘦身，又催生出了前端服务化的理念。在适配行业领域，业务场景，用户群体等不同条件下，前端低代码的设计落地和工程实践相应会呈现出不同的特征与特色。</p><a name="SCzSl"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="文章结构">文章结构<a class="hash-link" href="#文章结构" title="标题的直接链接">​</a></h2><ul><li>项目背景</li><li>技术架构</li><li>设计理念<ul><li>菜单树与路由</li><li>前端设计器</li><li>页面布局</li><li>动态表单</li><li>数据源</li><li>页面操作</li><li>节点参数阈</li><li>组件扩展</li></ul></li><li>愿景与规划<a name="KoMYQ"></a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="项目背景">项目背景<a class="hash-link" href="#项目背景" title="标题的直接链接">​</a></h2><p>SREWorks是一套面向企业级复杂业务的开源云原生运维解决方案，是大数据SRE团队多年工程实践的锤炼及沉淀。<br>解决前端开发的前端统一托管工程（sw-frontend）是运维解决方案的重要一环，提供了一套serverless体验的配置化前端低代码解决方案，该方案以运维人员为主要用户群体，集成了一套前端设计器/渲染器，提供前端页面部署，代码回滚，编译打包等功能。同时赋予运维人员根据自身业务需求，快速创建定制应用的能力，有效提升诸如支撑故障处理、监控分析、变更保障及值班/客服/大促等运维场景的运维效率。</p><a name="gzGbE"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="技术架构">技术架构<a class="hash-link" href="#技术架构" title="标题的直接链接">​</a></h2><p>低代码作为一种软件开发方式，特点在于少写代码或不写代码，只通过界面的托拉拽配置即可完成满足需求场景的软件，提高了软件的开发效率。效率提升的关键在于“复用”——对于前端页面而言，就是对页面进行解构抽象，映射为json等格式的配置文件，进而对各个粒度的组件进行编排复用；通过模板引擎进行组件映射，加载，渲染，路由组装编排，数据流传递注入等完成页面挂载。<br>作为一款着力于提升运维开发效率的前端低代码产品，sw-frontend工程采用React+antd为主的技术框架，设计了一套组件映射、编排、解析、渲染的工程体系：以antd组件为自由编辑粒度，用户在前端设计器通过可视化交互或者json编辑的方式，依据运维工作的实际使用场景，对组件进行属性配置/组件嵌套拼装；同时根据运维场景目标需求对页面组件进行布局的编排、数据源的绑定以及在合适点位插入Dynamic Logic，完成页面节点的设计工作，形成节点模型nodeModel，经模板解析引擎进行解析渲染。<br>sw-frontend整体架构图如下：<br><img loading="lazy" alt="image.png" src="/assets/images/1661324725328-cb10be8c-46e6-485b-a623-2be486e92515-e3acc8d11ff43ecb3c502e4853df6521.png" width="1694" height="1380" class="img_ev3q"></p><a name="krVbk"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="核心设计">核心设计<a class="hash-link" href="#核心设计" title="标题的直接链接">​</a></h2><p>低代码产品由于适配的需求场景和面向的用户群体不同，所呈现的产品形态和交互方式也各具特点：类似<strong>汽车自动驾驶</strong>，区分L1、L2、L3...，低代码产品在使用复杂度上也大体呈现几种形态：</p><ol><li>给<strong>普通用户</strong>使用的低代码产品：用户只需关心自身业务，无需代码配置，只用修改页面组件的 Data 就能快速地生成页面，通常营销活动页面都是通过此类方式快速构建；</li><li>面向<strong>中台开发</strong>的低代码产品：进行界面拖拽设计并进行json编辑配置即可；</li><li>着力于提高<strong>前端人员</strong>日常产出效率的可复用组件/插件：如json-shcema动态表等，具有一定封装粒度，旨在提升代码段复用率，提升开发效率；</li></ol><p>sw-frontend就是这样一款面向<strong>运维中台</strong>开发的低代码产品。运维是个特定的业务需求场景，搭建一个ui界面只是运维场景的需求之一；sw-fontend提供了一套满足<strong>强交互页面类型</strong>设计，serverless体验，灵活的数据流处理能力和丰富的组件扩展能力的低代码解决方案。它不单是一个低代码框架，而且还内置了或者塑造了一整套的运维工作流模式，以适配运维业务场景的使用：
<a href="/tpx7u2?_lake_card=%7B%22status%22%3A%22done%22%2C%22name%22%3A%22%E6%88%91%E7%9A%84%E5%BD%B1%E7%89%872%20(1).mp4%22%2C%22size%22%3A63509152%2C%22taskId%22%3A%22ubbe545d0-060c-4286-9100-371b252136e%22%2C%22taskType%22%3A%22upload%22%2C%22url%22%3Anull%2C%22cover%22%3Anull%2C%22videoId%22%3A%22inputs%2Fprod%2Fyuque%2F2022%2F703896%2Fmp4%2F1661324873023-39e92b87-c7ca-44dd-a56e-2321a06972cf.mp4%22%2C%22download%22%3Afalse%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22X4PTE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22card%22%3A%22video%22%7D#X4PTE"><img loading="lazy" src="https://gw.alipayobjects.com/mdn/prod_resou/afts/img/A*NNs6TKOR3isAAAAAAAAAAABkARQnAQ" alt="我的影片2 (1).mp4 (60.57MB)" class="img_ev3q"></a><a name="jgfny"></a></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="菜单树与路由">菜单树与路由<a class="hash-link" href="#菜单树与路由" title="标题的直接链接">​</a></h3><p>sw-frontend以用户创建的各个应用为一级路由构建起整个前端工程的菜单体系，所有的页面都是依托“应用”为节点进行挂载的。下图为应用<strong>运维桌面</strong>，用户可以点击应用快捷方式进入运维应用。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324734304-7e8acc35-2fbb-495c-b9ba-869f8f094ecf-f2e8b80b05a47c998c7cffc60365b5db.png" width="2880" height="1584" class="img_ev3q"><br><strong>运维桌面</strong>同时也是我们应用维度的其中一员，即在sw-frontend的总体设计概念上：一切皆是应用。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324729028-0cb3f742-e1ee-4b26-980b-52672c5f5984-208df93a3c7e3a55e3256352d2061f9a.png" width="2880" height="1586" class="img_ev3q"></p><a name="msiIU"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="菜单节点树">菜单节点树<a class="hash-link" href="#菜单节点树" title="标题的直接链接">​</a></h4><p>我们将运维应用前端页面中的菜单以树形节点（nodeTree）的形式组织起来，根结点映射为应用ID。从根节点创建的子节点，则作为一级菜单，以此类推孙子节点为二级菜单。如下图数据运维平台（appID：dataops）应用所示，一级菜单为“主页、资产目录、数据资产、数据管理、数据服务、数据质量”。该页面是dataops应用前端的渲染态。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324723135-56125203-0a46-4ce4-adb6-2e0e337c4a91-bc464511aa52bb14002a36319c58872a.png" width="2876" height="1418" class="img_ev3q"><br>进入到dataops应用的开发态，在前端开发编辑器中，我们可以从左侧菜单节点树看到与上面菜单一一对应的内容，每个节点上挂载了该页面的具体配置，每个页面配置包含一个主页面和多个页面区块配置，维护管理在页面设计器中。<img loading="lazy" alt="image.png" src="/assets/images/1661324728075-f6650b5e-6f3b-4ecd-a312-dff83e0e7db9-d58791b6d526fd24879aed75ecbc21c1.png" width="2876" height="1286" class="img_ev3q"></p><a name="iOnwc"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="动态路由生成">动态路由生成<a class="hash-link" href="#动态路由生成" title="标题的直接链接">​</a></h4><p>每个应用的页面菜单都抽象为一个页面节点树nodeTree，并在Node节点上可以对节点类型和菜单页布局以及权限等信息进行配置(菜单/Link作为嵌套路由使用)。我们将挂在在该节点的主页面和页面区块的相关配置：属性、数据源、编排等进行配置，我们称之为节点配置（nodeConfig）。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324728314-e4ec84e6-8ea4-46a7-a75d-3df79d9fe12f-aa0158881c5c20c1e22357264a7151f9.png" width="2574" height="1462" class="img_ev3q"><br>在一级路由页运行渲染时，根据应用id(appId)拉取对应nodeConfig，如下以&quot;运营中心&quot;为例，对应的应用配置如下：其中children所代表的为二级路由；config代表的是该级节点的属性配置；nodeTypePath字段作为描述节点树的上下级关联关系key；每一级子路由进行渲染挂载都会依据nodeTypePath先去索引其下一级子路由nodeModel，用于装载子级的动态路由。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324726993-c73fa888-2255-4d24-abe5-aaa5ab4c3f99-1fffa16011ec934a121e32667c71a0de.png" width="888" height="548" class="img_ev3q"><br>nodeTypePath也是作为子节点获取对应节点页面配置的索引key，用以拼接组装该节点的动态子路由。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324730454-ea71c956-78b9-44c1-b3ce-230d9aeb62a3-acd4ad66e6f45aaf54679d986d799e6b.png" width="867" height="500" class="img_ev3q"></p><a name="l1CQj"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="前端设计器">前端设计器<a class="hash-link" href="#前端设计器" title="标题的直接链接">​</a></h3><p><strong>swadmin</strong>作为内置应用的一员，同时也是其他应用的母应用，一生万物，所有应用的都是通过前端设计器设计配置而来；在此可以对组件/页面进行业务字段、ui和数据源的配置，对当前应用的节点树进行编辑，以及对每级节点对应页面的组件进行属性配置、数据源绑定和布局编排工作。<br>swadmin提供了两种交互编辑方式：</p><a name="p6Np5"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="可视化交互编辑">可视化交互编辑<a class="hash-link" href="#可视化交互编辑" title="标题的直接链接">​</a></h4><p>如下图就是在对staticPage这一应用下的一级菜单&quot;pageScreen&quot;页面进行开发编辑，下方弹窗区为对页面内大屏组件的属性进行可视化配置。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324731556-bf452a18-db89-4508-bf09-4916b691d8b7-0c3660b3943a1fc0134b837dee7deb49.png" width="2878" height="1490" class="img_ev3q"></p><a name="WVXni"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="源码编辑json编辑">源码编辑（JSON编辑）<a class="hash-link" href="#源码编辑json编辑" title="标题的直接链接">​</a></h4><p>除了可视化设计界面外，同时也提供了源码编辑，直接修改映射配置，以提供更大的灵活性；且可以在源码编辑和可视化编辑之间进行灵活切换，并保持同步的编辑态。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324732806-5efaa86d-9df9-4732-9793-c4c94282cfef-b7503c6a17dba3813f7a60e652b63970.png" width="2880" height="1486" class="img_ev3q"></p><a name="j3Zbc"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="页面布局">页面布局<a class="hash-link" href="#页面布局" title="标题的直接链接">​</a></h3><p>sw-frontend内置两种页面布局类型：自定义布局和流式布局(自定义布局当前只在内置应用使用，暂未对外部应用开源使用)。对于流式布局我们将页面抽象成若干行容器，在新增行容器时可以自定义分割成若干区块并并确定分割占比，每个区块对应一个组件容器位。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324731544-a1e0d75e-c4ee-4b50-bd82-aac76f0f3372-7fbda1387760587d77cd1012f2cbb1c9.png" width="945" height="713" class="img_ev3q"><br>对于自定义布局，可以根据业务需要对添加进入的区块组件任意拖拉改变宽高以及布局位置：<br><img loading="lazy" alt="image.png" src="/assets/images/1661324732654-a716f907-8eed-4610-a0cc-d1d2778a642c-a49dab3063ab8a744d1b0c63bdadeb33.png" width="945" height="713" class="img_ev3q"></p><a name="y3Wf3"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="组件体系">组件体系<a class="hash-link" href="#组件体系" title="标题的直接链接">​</a></h3><p>sw-frontend采取声明式组件注册机制，每个内置组件由meta元数据文件和主文件两份文件构成，其中meta以json格式用来描述该组件的一些可配置属性及组件的属性默认值和组件名称、组件ID等信息用于组件的注册和loader加载；主文件则用来承接用户对组件的配置信息和数据源数据及一些外部嵌入的逻辑代码。</p><table><thead><tr><th><img loading="lazy" alt="image.png" src="/assets/images/1661324733615-ad09c057-9a5c-459c-bc38-59ec80d72a6c-742949aa2c5cb114fa4af469bd41bcf4.png" width="452" height="1318" class="img_ev3q"></th><th><img loading="lazy" alt="image.png" src="/assets/images/1661324733609-8f8cc164-5fa5-4d73-9e3b-0730cdadc243-0d8b67958dfddf86be8640960992c446.png" width="1200" height="1350" class="img_ev3q"></th></tr></thead></table><p>同时页面提供自定义组件入口，供用户自行设计一些简单的组件以JSXRender方式进行渲染，且用户可以对自定义组件进行添加删除和编辑管理。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324734470-b1f3fe8e-4398-42b7-a205-a8f3c8d702c2-d72acfbf2d3b4357e2cc9100cc96c1da.png" width="2876" height="1056" class="img_ev3q"></p><a name="n6dNj"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="动态表单">动态表单<a class="hash-link" href="#动态表单" title="标题的直接链接">​</a></h3><a name="zcLwc"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="表单工厂">表单工厂<a class="hash-link" href="#表单工厂" title="标题的直接链接">​</a></h4><p>页面交互还有重要的一环：<strong>表单数据的交互</strong>。sw-frontend提供了近三十种输入形式的表单项以供表单设计选择使用，对于Form表单提供了界面化的属性配置如：表单项类型、是否展示、表单项数据源、表单项条件渲染、表单项label、表单项key，表单拖拽排序，动态添加表单项等。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324735915-3b40e33f-ea18-44d7-a31c-2f21288f3c0c-bdaf25714f36ea4b5eb491a7aa616324.png" width="2880" height="1362" class="img_ev3q"><br><img loading="lazy" alt="image.png" src="/assets/images/1661324735984-f1260472-3c47-4108-b0b5-99e0c12db8cf-0064808d4c5308e6e3487425500f0651.png" width="2880" height="900" class="img_ev3q"></p><p>对于表单数据的编辑回填,以及表单和页面的数据流以及action交互，也做了模型化的抽象处理，这个在后面页面操作章节做详细介绍。</p><a name="a3N4N"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="过滤器表单action">过滤器/表单Action<a class="hash-link" href="#过滤器表单action" title="标题的直接链接">​</a></h4><p>对于页面的表单Action，如新增、编辑等，sw-frontend抽象为单独的操作区块，每个操作区块创建时会生成unikey，在页面组件工具栏区添加好操作button后，可以通过页面交互或源码编辑的形式建立绑定关系。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324737815-2efe31fa-cb2d-407c-a110-b5338f081c28-0c290d5d8b448f09d431cecb629a1672.png" width="2880" height="1500" class="img_ev3q"><br>源码视角下，在table组件的toolbar字段下，“新建应用”button以blockId的形式跟新建应用的表单操作区块建立了绑定关系；当模板引擎解析到toolbar工具栏，会用该blockId获取到该操作区块的配置，然后根配置以表单工厂函数加载对应表单项并对其表单项值初始化。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324738735-f1f3355d-e56f-4ae4-9e07-3e3167643acc-a6837f5841cdebea96c608fc97712d3d.png" width="2880" height="1496" class="img_ev3q"></p><a name="ypbiP"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="过滤器">过滤器<a class="hash-link" href="#过滤器" title="标题的直接链接">​</a></h4><p>过滤器是对传统页面开发条件中过滤表单的一种抽象，在设计器中对过滤器的定义和action表单操作大体一致，只是过滤器没有表单提交地址，关联组件如table的过滤刷新，是经由过滤器将表单项的字段值投递到参数阈，table的数据源获取执行器进而通过侦听对比参数阈的关联字段值的变化重新拉取数据，来<strong>间接</strong>完成表格数据的过滤查询操作；而action操作则是将表单提交到后端地址，确认成功提交后通过callback来完成参数阈投递更新，<strong>间接</strong>完成组件的数据刷新操作。</p><table><thead><tr><th>过滤器<br><img loading="lazy" alt="image.png" src="/assets/images/1661324739070-bdc86fb8-8dce-4aed-83d7-6b322b45cfb8-572363e2e38295c8317b48e89e0523ad.png" width="2880" height="1486" class="img_ev3q"></th><th>action操作<br><img loading="lazy" alt="image.png" src="/assets/images/1661324740048-e5a7b02a-898a-44c7-81e1-a0acb8ec0183-52cf8fd3e1904cbc98de50f22ec63f8d.png" width="2880" height="1482" class="img_ev3q"></th></tr></thead></table><a name="YpNE7"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="数据源">数据源<a class="hash-link" href="#数据源" title="标题的直接链接">​</a></h3><p>sw-frontend提供了灵活的数据流处理机制，降低对接口的数据格式及参数的固定要求，使应用富客户端化，这也是serverless体验的关键一环：在此用户可以灵活定义组件/页面节点数据源类型，提供类似GraphQL的模式，在设计器中对返回数据进行灵活处理。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324740916-ec0106aa-267b-458e-964e-bb77b4514ed4-559aee2059b2d7d8fde15f750539f275.png" width="2880" height="1486" class="img_ev3q"><br>对于数据源为api格式的地址中使用$(变量名)，会统一从参数阈中渲染替换，然后获取组件数据源的数据；同时提供请求前置函数和请求后置函数的执行钩子，在这里可以进行数据的拆解或组装以及写入一些业务逻辑代码。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324742374-bb0f17cc-d648-4f6f-9d5c-3ab218004ac0-03896d107adf6c4a6fd159090273d788.png" width="2880" height="1486" class="img_ev3q"></p><a name="GyLcb"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="页面操作action">页面操作（Action）<a class="hash-link" href="#页面操作action" title="标题的直接链接">​</a></h3><p>页面操作是低代码工程设计里面的重要一环，承载着很大一部分运维需求场景，sw-frontend将页面操作抽象为四个大的类别：工程内置操作类，过滤器类，表单提交类，超链跳转类。<br><img loading="lazy" src="/assets/images/1652374762157-3109b42d-f688-46ca-92c1-3d3ce449908d.jpeg-6955b86a1e3f27397983d7fd01be82f3.png" width="1400" height="1016" class="img_ev3q"></p><ul><li>工程内置操作类</li></ul><p>sw-frontend在组件的工具栏内置了若干通用的按钮类的操作，根据操作类型map，识别相应操作进行渲染。典型的如“组件刷新”操作，用户在界面添加该按钮，配置唯一识别字段&quot;<strong>refresh</strong>&quot;，即可完成组件刷新操作的配置，该刷新Button通过触发参数阈改变事件，间接完成组件的数据刷新操作。</p><ul><li>超链跳转类</li></ul><p>超链跳转类别的操作，常用于表格等组件的行内操作，一般以JSXRender的形式进行配置，渲染为			Button/Link。进行路由跳转或者超链跳转时，表格行内数据可以作为传入参数使用。</p><ul><li>过滤器类</li></ul><p>过滤器本质而言是对传统开发方式下页面查询的一种抽象：组件本身定义有数据源，过滤器的职能是触发组件重新获取数据。在sw-frontend中，过滤器的表现形式可以是一组tab、一组表单项。以表单类过滤器为例：用户在填充各过滤条件之后，“提交”操作本质并没有直接的提交地址，而是进行表单参数的投递--改变节点参数阈，组件通过监听参数阈关联字段的改变，重新拉取数据，完成传统页面的查询操作。</p><ul><li>表单提交类</li></ul><p>表单操作承载了大部分的页面操作，sw-frontend将常规的“增”、&quot;删&quot;、&quot;改&quot;都抽象为表单提交类的事件，对这类Action操作，在完成和服务端交互后，以callback的形式，进行节点参数阈字段的投递，以触发数据渲染类组件的刷新从而完成“增”、&quot;删&quot;、&quot;改&quot;类的操作，如下两图分别为Action操作定义和运行时渲染界面：<br><img loading="lazy" alt="image.png" src="/assets/images/1661324741913-1bda66bb-c6cf-40fd-ab2a-021451106a18-e5d4ff952456968a46281dbae4fcb71f.png" width="2854" height="1520" class="img_ev3q"><br><img loading="lazy" alt="image.png" src="/assets/images/1661324743072-3095e15b-c67a-4e60-9319-5ea2ed73fdd1-81ddcfccbb291eddb83e468eab2cc666.png" width="2152" height="1530" class="img_ev3q"><br>其中在进行数据编辑时的表单数据回填，大多数场景为列表类数据的编辑：<strong>定义在行内的“编辑”操作会绑定一个表单Action区块；在点击事件发生时，会将该行内数据对象rowData与当前节点参数阈合并，作为actionParams传入该Action表单区块，表单区块通过读取actionParams的对应字段value作为各表单项的initValue，完成数据回填。</strong></p><a name="OQs9a"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="节点参数域">节点参数域<a class="hash-link" href="#节点参数域" title="标题的直接链接">​</a></h3><p>节点参数阈是以Redux状态管理机制为依托，建立路由节点页面共享参数对象nodeParams，节点页面各组件通过对nodeParams的修改和对应字段侦听来间接完成组件间的信息传递和事件交互。<br>sw-frontend在节点页创建之初，会初始化节点参数域：nodeParams；在节点页面的生命周期内，也会将url中变量参数，一些页面交互产生的runtime参数以及外部函数投递来的参数整合到节点参数域中来。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324744146-a0e83732-95b3-4ee4-aae7-8190eac242f1-aa58ab57319f5cb586cac87cb05136a9.png" width="2872" height="1576" class="img_ev3q"><br>随之组件在经过统一数据源处理器获取数据流渲染之后，会对节点参数阈的target字段值通过监听对比，以触发数据reload刷新机制，重新获取数据源数据；同时页面的一些action表单操作，也是通过参数阈投递更新目标字段值进行进行间接触发相应组件的reload刷新渲染。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324745365-8ae686d0-3199-47df-97e8-91b317d9fc9e-49298bb3260c191a629f41df5024f11a.png" width="2818" height="1548" class="img_ev3q"></p><a name="llnrG"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="组件扩展">组件扩展<a class="hash-link" href="#组件扩展" title="标题的直接链接">​</a></h3><p>sw-frontend提供了声明式内置组件的注册机制，同时开辟了用户自定义组件的入口，用户可以将一些常用的自定义组件嵌入到我们的组件列表，以供前端设计器统一调拨；当前自定义组件以JSXRender的方式进行执行，可以直接书写JSX代码，同时能够识别antd组件，赋予用户更加灵活的页面渲染能力。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324745933-67d89b8a-5731-4b57-a68d-e42313540347-f7c942116334bc6cdf07816e96dec829.png" width="2880" height="1584" class="img_ev3q"></p><a name="mOfBC"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="愿景与规划">愿景与规划<a class="hash-link" href="#愿景与规划" title="标题的直接链接">​</a></h2><p>现sw-frontend已内置运维场景常用的基础组件，图表组件，landing组件，布局组件等五十余个组件，除此之外还开放了用户自定义简单JSX组件的入口，让用户对自定义组件进行编辑管理，以拓展组件扩展和插拔使用的空间。同时动态加载远程组件，建立运维组件生态市场也纳入到了后面的版本规划中；以期能够共建打造出一个丰富共享的运维组件生态来，这也是我们将其开源的一个初衷愿景。<br><img loading="lazy" alt="image.png" src="/assets/images/1661324745990-c19dcf19-5b53-450f-bf40-199e7c778e07-5b6a2b641429ab07895055794fccaec9.png" width="1726" height="1578" class="img_ev3q"></p><p>版本动态： 我们会根据工作项目节奏，持续对功能进行完善优化和升级。近期在5月上旬发布了一个小版本，该版本加入了页面模板保存和从模板快速创建的功能，以进一步聚焦&quot;复用&quot;，提升开发效率。</p><p>同时也欢迎大家多提issue,协力将SREWorks打造得更好: <br><a href="https://github.com/alibaba/SREWorks/tree/main/paas/sw-frontend" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/SREWorks/tree/main/paas/sw-frontend</a></p></div></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/column/xsn02u">基于Elasticsearch生长的SREWorks数据化运维体系</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-08-22T23:07:28.000Z" itemprop="datePublished">2022年8月22日</time> · <!-- -->阅读需 13 分钟</div></header><div class="markdown" itemprop="articleBody"><p>开源Elasticsearch是一个基于Lucene的实时分布式的搜索与分析引擎，是遵从Apache开源条款的一款开源产品，是当前主流的企业级搜索引擎。作为一款基于RESTful API的分布式服务，Elasticsearch可以快速地、近乎于准实时地存储、查询和分析超大数据集，通常被用来作为构建复杂查询特性和需求强大应用的基础引擎。</p><p>2017年，阿里云携手Elastic合作推出了阿里云Elasticsearch服务，在100%兼容开源功能的同时，支持开箱即用、按需付费。通过 Elastic 创新的检索技术与阿里云自研的云原生高性能内核、达摩院 NLP 分词与向量检索等能力，帮助企业客户提升业务成效，并节约费用支出。在切实提高企业应用程序性能的同时，提升业务的敏捷性和智能化，缩短解决问题所需时间，使客户可以专注于自身业务创新。</p><p>基于&quot;源于开源，又不止于开源&quot;的产品理念，阿里云Elasticsearch持续在包含智能运维在内的可观测场景进行云原生引擎能力升级，作为业内首个Serverless Elasticsearch云服务，云上日志增强引擎可提供基于读写分离架构的Indexing Service写入加速服务、Openstore海量存储服务，从而实现Elasticsearch写入及存储Serverless，为用户带来更低成本、更高性能、更简单易用的全观测场景能力。</p><p>ELK作为业界处理与分析日志首选的解决方案，由搜索引擎Elasticsearch、采集与解析工具 Logstash、轻量级采集组件Beats、可视化分析工具Kibana等工具组成，形成了一整套生态矩阵。目前阿里云已经成功将全套ELK搬到了云上为用户提供服务，可以被广泛应用于实时日志处理、全文搜索和数据分析等领域。SREWorks正是基于以Elasticsearch为主的生态矩阵，构建了一套应用全观测数据化运维最佳实践。</p><a name="q0lag"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-数据化运维体系是什么">1. 数据化运维体系是什么<a class="hash-link" href="#1-数据化运维体系是什么" title="标题的直接链接">​</a></h3><p>数据化运维体系，是一套把所有系统的运维数据采集起来、真正打通，深度挖掘这些数据的价值，通过数据驱动运维并为运维提供数据决策，同时能将生产系统进行“运维量化管理”的数据化运维业务模型。基于该模型建立标准化运维数仓，建设数据运维平台，在平台中规范运维数据的采集，存储，计算以及分析，并提供一系列数据化服务，供上层运维场景使用。</p><a name="CKt9q"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-sreworks数据化运维平台">2. SREWorks数据化运维平台<a class="hash-link" href="#2-sreworks数据化运维平台" title="标题的直接链接">​</a></h3><p>SREWorks数据化运维平台包含一个核心和多个数据服务，一个核心即运维数据仓库，提供标准运维数据模型；多个数据服务即围绕运维数据的采集、存储、计算以及分析的数据化链路，提供的规范化数据服务，支撑应用的运维量化。<br> <br><strong>运维数仓</strong><br>基于开源Elasticsearch建设标准化运维数仓，抓住数据化运维本质，抽象三大数据主题和九个数据域，内置涵盖云原生数据运维场景的数据实体和数据模型。数仓具备灵活的用户自定义实体/模型能力，充分满足用户的个性化需求。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209668325-f0e81ee3-8ce1-4557-b65d-f7ebbece2d72-d6782bde1ed4070ef540320c82dce09e.png" width="749" height="370" class="img_ev3q"><br>数仓数据后端采用Elasticsearch存储，其分布式索引架构、多副本、索引生命周期管理以及数据冷热存储分离等特性，很好的满足了数仓的稳定性和动态性基本特性。同时可以对接多种数据处理工具(Logstash、Spark、Flink、APM Server)，最终数据落地Elasticsearch，支撑起整个运维数仓的存储和检索能力。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209668998-14cbe1dc-d5df-4332-8790-f41fcb5f5503-dc93001b39da0e0e778fbbe4fda4e209.png" width="2539" height="613" class="img_ev3q"><br><strong>数据采集服务</strong><br>集成metricbeat、filebeat、skywalking等数据采集agent，以全托管方式，进行可观测数据采集，包括Node/Pod/Container资源/负载指标、状态指标、运维事件、Prometheus外围指标、服务(容器)日志采集解析、服务追踪调用链采集分析等。metricbeat支持基于标签的服务自动发现能力，默认监听10800端口，主动采集满足标签条件服务上报的业务指标数据。<br>作业平台采集场景服务，属于自研数据采集服务，支持多种数据采集脚本，关联数仓模型，通过SREWorks运维数仓托管业务的运维数据。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209668921-d083c10d-2026-4ecd-b747-3015fa5daeab-01fc3990d00e5ee67dbb6f5cc32969f3.png" width="1427" height="1141" class="img_ev3q"></p><p><strong>数据计算/分析服务</strong><br>开源Apache Flink是一个⼀站式实时大数据分析平台，通过标准SQL降低业务开发门槛，提供端到端实时数据分析能力。同时内置常规数据处理UDF(阈值检测、数据聚合、数据降采样)，支撑时序数据的流式加工处理。<br>作业平台数据化场景服务，覆盖巡检、分析、诊断等多个数据化场景，可自定义数据处理逻辑，满足用户个性化数据处理要求。</p><p><strong>指标服务</strong><br>提供指标定义和指标实例的配置与管理，已经内置基础资源和基础性能指标，用户可以按需新增指标。新增指标可以关联到采集场景服务，支持指标数据推送kafka队列，用于进行下游数据计算消费。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209669016-d08b6257-79d9-4087-90d2-44edcdf39d76-4e14a3c2a7aa7961aec5c7e12e5547af.png" width="1793" height="930" class="img_ev3q"><br>**  <strong><br></strong>数据集服务**<br>数据集服务提供快速将运维数仓模型存储数据表或者用户自定义数据源表生成API的能力，用户无需具备编码能力，即可快速配置数据接口，实现数据的管理和消费。目前优先支持elasticsearch和mysql数据源。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209669026-d4539c5c-cbfe-4cba-8d65-b8fcb3bb1073-84a91f07b2305613819720ae997aaf4d.png" width="2530" height="828" class="img_ev3q"></p><a name="O1CXu"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-基于sreworks数据化运维实践">3. 基于SREWorks数据化运维实践<a class="hash-link" href="#3-基于sreworks数据化运维实践" title="标题的直接链接">​</a></h3><a name="iAuAX"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31-稳定性建设">3.1 稳定性建设<a class="hash-link" href="#31-稳定性建设" title="标题的直接链接">​</a></h4><p><strong>服务链路全观测建设</strong><br>由于IT系统日益增加的复杂度、大量云原生技术的采用，使得服务快速排障变得越来越难。而指标、日志和追踪三大可观测性支柱，可以实现服务的白盒监控能力。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209670366-4f39fafb-1471-4a11-b4ae-5ff679d08c87-85a0f94410cffa28d89162fc3e0e7ee3.png" width="676" height="400" class="img_ev3q"><br>SREWorks数据平台集成metricbeat、filebeat、skywalking等数据采集agent和自研数据采集场景作业，提供全托管一站式可观测数据采集能力，可以直接获取运行系统的指标、日志和调用链，协助问题的排查和诊断，缩短故障恢复时长(TTR)。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209670680-1f16ef9a-1db5-42ef-ae0e-97a6ee1a2fcd-67bf4a5cb93edeebf1e4eee34ea9b0c5.png" width="1783" height="420" class="img_ev3q"><br><strong>健康管理服务建设</strong><br>为了帮助用户更好的感知系统运行状态，实现系统的监控管理，结合阿里Emon团队的智能检测服务和自研作业场景服务，构筑健康管理服务。包括事件采集管理、风险巡检、指标告警检测、异常诊断场景作业，帮助用户识别风险、分析告警、进行异常诊断和自愈以及故障管理。<br>建设规范化健康管理平台，能够降低或者消除系统隐患，尽最大可能将潜在故障扼杀在萌芽状态。一旦故障发生及时通知关联人员，进一步提升应对效率，确保行动的有效性。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209671031-1823814c-5e51-46f0-a37d-be2844f6257b-d137a00245f55b7e0f4ea896f47cfe42.png" width="1790" height="1182" class="img_ev3q"></p><a name="PM3C0"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32-成本建设">3.2 成本建设<a class="hash-link" href="#32-成本建设" title="标题的直接链接">​</a></h4><p>当前云原生服务成为云计算主流的服务形态，但由于云原生化的应用程序及其资源需求常常是动态变化，这也导致云成本的计算复杂性。为此，SREWorks内置一套完整的成本管理解决方案，包含资源消耗计量计费的可视化、资源使用明细分析，用于辅助用户优化和治理云资源成本。<br>SREWorks系统设置下的成本定价模型，重点从资源层面（CPU、内存、存储）进行成本核算。平台会自动按照应用粒度，每天进行应用资源用量和成本计费汇总，汇总数据自动同步至数据仓库<strong>应用成本模型(APP_COST)</strong>存储。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209671053-fa10ef61-3bfa-44d1-9302-efac1ee9718a-4b9fa053e663a7590362ad2a1e5a1463.png" width="1798" height="568" class="img_ev3q"></p><a name="fLyNY"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="33-效率建设">3.3 效率建设<a class="hash-link" href="#33-效率建设" title="标题的直接链接">​</a></h4><p>运维效率即运维活动的效率，代表了运维的平台化能力，包括自动化运维操作和自动化的构建部署等，而人效比是最能直接体现运维效率，衡量人力资源价值的指标。      <br>  <img loading="lazy" alt="image.png" src="/assets/images/1661209671261-4516a7cd-90e9-4a30-9810-42f79ed0f5ca-5fa53b0b5cddad4bfae36ada993ce6c4.png" width="721" height="429" class="img_ev3q"><img loading="lazy" alt="image.png" src="/assets/images/1661209671447-dd9dac8e-11b3-499d-a271-10e5cfd26d74-0f459b76840f2b79633b020455165ac2.png" width="723" height="373" class="img_ev3q"></p><a name="ytjAu"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="34-运营中心">3.4 运营中心<a class="hash-link" href="#34-运营中心" title="标题的直接链接">​</a></h4><p>运营中心从质量、成本、效率三个维度，提供应用的实时健康分、健康实例统计、应用可用率、应用成本占比、资源分配、运维人效、运维操作统计等关键数据看板，致力于保证用户获取准确可靠的应用运行状况、健康趋势、成本资源水位以及人力消耗，从而作出稳定性保障、预算准备、资源扩容等运维决策。<br><img loading="lazy" alt="image.png" src="/assets/images/1661209672316-d9adc066-42c3-4b5f-b4fd-9058205a92d1-0d68b789f8151454d8d2e1f6cdace9a1.png" width="2168" height="853" class="img_ev3q"></p><a name="v0ZYc"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-结语">4. 结语<a class="hash-link" href="#4-结语" title="标题的直接链接">​</a></h3><p>随着阿里巴巴云原生大数据运维平台SREWorks的开源，我们得以将其中的数据化运维思想和运维实践分享给大家，抛砖引玉，希望能给大家带来不一样的思想碰撞。同时欢迎大家持续关注我们的开源数据化平台，期待与您进行沟通交流，一起推动云原生数据化运维的发展建设。</p><p>项目地址：<a href="https://github.com/alibaba/sreworks" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/sreworks</a><br>如需免费试用了解阿里云ES请戳 <a href="https://www.aliyun.com/product/bigdata/elasticsearch" target="_blank" rel="noopener noreferrer">阿里云Elasticsearch</a></p></div></article><nav class="pagination-nav" aria-label="博文列表分页导航"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/rr5g10">快速安装</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/eg91va">核心思想</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cirgod">数智运维</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/alibaba/sreworks/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><div class="wechat"> <span class="wechat-label">钉钉交流群</span> <a class="wechat-img" rel="noreferrer noopener" aria-label="DingTalk Group"><img src="https://sreworks.oss-cn-beijing.aliyuncs.com/logo/ding.jpg"></a></div></li><li class="footer__item"><div class="wechat"> <span class="wechat-label">微信交流群</span> <a class="wechat-img" rel="noreferrer noopener" aria-label="Wechat Group"><img src="https://sreworks.oss-cn-beijing.aliyuncs.com/logo/weixin-helper.jpg" alt="Broker wechat to add you into the user group."></a></div></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 SREWorks, Inc. Built with Docusaurus</div></div></div></footer></div>
<script src="/assets/js/runtime~main.17fdd7ba.js"></script>
<script src="/assets/js/main.29991fa4.js"></script>
</body>
</html>