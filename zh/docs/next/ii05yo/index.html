<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ii05yo">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/docs/zh/blog/rss.xml" title="SREWorks RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/zh/blog/atom.xml" title="SREWorks Atom Feed"><title data-rh="true">4.1.4 企业应用管理 | SREWorks</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sreworks.opensource.alibaba.com//docs/zh/docs/next/ii05yo"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="keywords" content="sreworks 官方,sreworks官方文档,SREWorks,SREWorks官网,SRE works,SREworks,srework,srewoks,sreworks,srework,sre文档,sre-works,sre official,sre_works,云原生运维,大数据运维,阿里运维,云原生k8s,智能运维,数智运维,简单运维,高效运维,appmaniger,一站式运维,saas运维"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4.1.4 企业应用管理 | SREWorks"><meta data-rh="true" name="description" content="SREWorks中针对企业云原生应用管理，提供了从开发、构建、发布到交付部署的完整端到端能力，覆盖常见的CI/CD/CO流程，以应用管理的SaaS形态提供。"><meta data-rh="true" property="og:description" content="SREWorks中针对企业云原生应用管理，提供了从开发、构建、发布到交付部署的完整端到端能力，覆盖常见的CI/CD/CO流程，以应用管理的SaaS形态提供。"><link data-rh="true" rel="icon" href="/docs/zh/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://sreworks.opensource.alibaba.com//docs/zh/docs/next/ii05yo"><link data-rh="true" rel="alternate" href="https://sreworks.opensource.alibaba.com//docs/docs/next/ii05yo" hreflang="en"><link data-rh="true" rel="alternate" href="https://sreworks.opensource.alibaba.com//docs/zh/docs/next/ii05yo" hreflang="zh"><link data-rh="true" rel="alternate" href="https://sreworks.opensource.alibaba.com//docs/docs/next/ii05yo" hreflang="x-default"><link rel="stylesheet" href="/docs/zh/assets/css/styles.ad5c420f.css">
<link rel="preload" href="/docs/zh/assets/js/runtime~main.96b37710.js" as="script">
<link rel="preload" href="/docs/zh/assets/js/main.80684ee5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/zh/"><b class="navbar__title text--truncate">SREWorks</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/zh/docs">docs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/docs/docs/next/ii05yo" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li><li><a href="/docs/zh/docs/next/ii05yo" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">简体中文</a></li></ul></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/docs/zh/"><b>SREWorks</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/zh/docs/next/">全局导航</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/zh/docs/next/fx909t">1 基础知识</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/zh/docs/next/rr5g10">2 安装配置</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/zh/docs/next/eg91va">3 架构思想</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/zh/docs/next/ynueoi">4 平台使用指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/zh/docs/next/ynueoi">4.1 企业应用</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/docs/next/ynueoi">4.1.1 什么是企业应用</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/docs/next/pdqddr">4.1.2 企业组织管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zh/docs/next/moptgx">4.1.3 企业资源管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/zh/docs/next/ii05yo">4.1.4 企业应用管理</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/zh/docs/next/uopmre">4.2 运维应用</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/zh/docs/next/ulnx34gs02gf6ybf">5 平台二次开发指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/zh/docs/next/cgczgu">6 最佳场景实践</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->SREWorks<!-- --> <b>Next</b> 版尚未发行的文档。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/docs/zh/docs/ii05yo">最新版本</a></b> (<!-- -->v1.4<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/docs/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">4 平台使用指南</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">4.1 企业应用</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4.1.4 企业应用管理</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>4.1.4 企业应用管理</h1></header><p>SREWorks中针对企业云原生应用管理，提供了从开发、构建、发布到交付部署的完整端到端能力，覆盖常见的CI/CD/CO流程，以应用管理的SaaS形态提供。</p><a name="gEUqn"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-应用开发">1 应用开发<a class="hash-link" href="#1-应用开发" title="标题的直接链接">​</a></h2><p>承载企业云原生应用的CI流程，用户可以新建应用，并一键构建和测试环境部署，在确定功能正常后可发布到应用市场。</p><a name="HutKe"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11-新建应用模板">1.1 新建应用模板<a class="hash-link" href="#11-新建应用模板" title="标题的直接链接">​</a></h3><p>登录SREWorks后，进入“交付/应用管理-应用开发”页面，会展示开发态的应用模板列表。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179531993-044a6e69-8d94-4154-be5f-77488f7eb2ce-96be18962b4ed8a11072ed6ea378a714.png" width="2830" height="1298" class="img_ev3q"><br>点击“新建云原生应用”，在滑出的表单中输入应用定义相关信息，即可完成应用模板定义<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179532148-7df1ecab-e577-421e-bf95-3fbe935ac342-5e011070243b0576c9f047996786ab39.png" width="2820" height="1482" class="img_ev3q"></p><a name="lAX7o"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="12-添加应用组件">1.2 添加应用组件<a class="hash-link" href="#12-添加应用组件" title="标题的直接链接">​</a></h3><p>当前支持两种内置组件类型的添加，“Helm类型”和“微服务类型”组件，用户可按自身应用架构进行选择，一个应用可以包含1到N个组件。 组件是企业应用的核心承载体。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179532330-71ad1a65-1318-4654-8a58-4fb06297a11a-c26d65cc4d00633d4a54fa6ac0cae594.png" width="2858" height="1486" class="img_ev3q"></p><a name="U19f2"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13-应用构建">1.3 应用构建<a class="hash-link" href="#13-应用构建" title="标题的直接链接">​</a></h3><p>在完成组件添加后，可以在“应用构建”页面进行一键构建，当前一键构建会自动计算版本，创建构建任务后，在构建列表中可查看刚刚提交的构建任务。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179532522-9a54560d-f21b-4852-bf23-459a115b443d-2f9a3e68ceb7d3cb2d58abb9839792f7.png" width="2866" height="1494" class="img_ev3q"><br>构建完成后，即可在构建列表中展示当前构建的应用及组件构建状态，同时可以在操作中一键部署测试和上架市场。</p><a name="K8I4C"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14-应用测试部署">1.4 应用测试部署<a class="hash-link" href="#14-应用测试部署" title="标题的直接链接">​</a></h3><p>应用测试实例支持多套部署，并会自动生成全局唯一的实例名，规则为“应用名-uid”。该实例被部署在同名的namespace下。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179532682-e985de36-0714-45db-826f-f4121ed69644-920647c97693cf18788c984201fff153.png" width="2868" height="1494" class="img_ev3q"><br>用户可自行对应用进行测试，测试通过后，可选择一键发布到市场的操作将应用版本发布到市场中。</p><a name="iBcye"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="15-应用发布">1.5 应用发布<a class="hash-link" href="#15-应用发布" title="标题的直接链接">​</a></h3><p>通过构建列表中指定构建任务的“上架市场”操作完成应用到市场的发布。<img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179532831-cad6ffe1-a38f-49d8-93d1-05e6a8f6efc1-8aa1e60debe9d15967c7a6ec63943b78.png" width="2850" height="1400" class="img_ev3q"></p><a name="t3JV9"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-应用市场">2 应用市场<a class="hash-link" href="#2-应用市场" title="标题的直接链接">​</a></h2><p>应用市场用来分发企业应用的制品，在应用市场中是完成开发测试的稳定应用版本定义，同时应用市场的背后关联有具体的软件仓库，软件镜像制品在构建过程中都会上传到软件仓库。</p><a name="Puqg4"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="21-应用部署">2.1 应用部署<a class="hash-link" href="#21-应用部署" title="标题的直接链接">​</a></h3><p>在市场中可以指定应用一键部署，当前默认部署应用的最新版本。<img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179532988-f1bab459-7fb0-4b83-aee5-a940454e3bca-5632ecbd879e09fc43f51883798a3505.png" width="2866" height="1086" class="img_ev3q"></p><a name="AZmOu"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="22-应用下架">2.2 应用下架<a class="hash-link" href="#22-应用下架" title="标题的直接链接">​</a></h3><p>在市场中可以指定应用一键下架，当前每次操作将下架该应用的当前最新版本，下架是需要输入应用名进行确认。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179533142-0b19cfad-9550-4760-ac04-4f9c4d119a0e-c47424c6fa41f7152c3f801ca95fe2e1.png" width="2876" height="1320" class="img_ev3q"></p><a name="xJ9io"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-应用中心">3 应用中心<a class="hash-link" href="#3-应用中心" title="标题的直接链接">​</a></h2><p>应用中心是企业应用线上生产实例的管理中心，当前提供应用实例列表页面和应用详情管理页面。在实例列表中可对应用版本做升级回滚相关操作。</p><a name="RfvwI"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="31-应用实例列表">3.1 应用实例列表<a class="hash-link" href="#31-应用实例列表" title="标题的直接链接">​</a></h3><p>应用实例列表展示当前部署在prod的企业应用生产实例，并提供升级、回滚、卸载操作。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179533333-a70dd1ba-6b56-48ab-95aa-4f778ce20c00-58e51504174d5933b87f89b3b022f0e7.png" width="2860" height="1488" class="img_ev3q"></p><a name="RBP5T"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="32-应用实例详情">3.2 应用实例详情<a class="hash-link" href="#32-应用实例详情" title="标题的直接链接">​</a></h3><p>在应用实例详情中提供了应用实例的概览、事件、组件、健康、指标、日志、跟踪等基本运维监控管理页面功能。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179533482-eecf5e3d-eec1-4909-9eba-6970058f37ef-5e05e95154d350d4b65d532633b10d29.png" width="2872" height="1478" class="img_ev3q"></p><a name="agoso"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-应用数据化配置管理">4 应用数据化配置管理<a class="hash-link" href="#4-应用数据化配置管理" title="标题的直接链接">​</a></h2><a name="h1SjG"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="41-应用数据化配置">4.1 应用数据化配置<a class="hash-link" href="#41-应用数据化配置" title="标题的直接链接">​</a></h3><a name="wyX8t"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="411-应用指标定义">4.1.1 应用指标定义<a class="hash-link" href="#411-应用指标定义" title="标题的直接链接">​</a></h4><p> 指标定义页面可以开启内置指标（应用CPU水位、 应用RAM水位、 应用PVC分配量、 应用平均响应时间、 应用请求成功率、 应用unready状态POD数量）。开启后，会自动创建一个<strong>基础指标采集作业，</strong>用于基础内置指标的采集，同时指标数据会接入数仓服务。</p><p>另外，指标定义可以自动添加业务指标。添加的指标默认会打上<strong> app_id</strong>和<strong>app_name</strong>两个标签，用于标识指标归属当前应用定义。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179533646-f5dd80a7-92d9-413f-b6be-8668b6f7d689-0bb89e2927279d0b7babcf99daf09973.png" width="1809" height="1036" class="img_ev3q"></p><p><strong>指标数据采集</strong></p><p>方式一、通过作业平台采集服务。用户可创建关联指标的采集场景作业，关联指标的采集数据可支持推送消息队列topic(sreworks-dataops-metric-data)，支持下游数据消费。<br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179533830-97e24d79-8f5a-4eaa-9646-a89076f86452-3163e202fcdf3af3847215aafdc3b6dc.png" width="1323" height="548" class="img_ev3q"><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179533989-7bf389b0-8d81-41ed-bc33-0f4d7ae8b064-d5eebe1c83fb90b0c7349ac20fdc61e9.png" width="1353" height="233" class="img_ev3q"></p><p>方式二、通过指标服务API</p><p> 公共URL请求参数</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">metricId         // 指标ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">isInsertNewIns   // 是否插入新增指标实例</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">isPushQueue      // 指标实例数据是否推送kafka消息队列topic(sreworks-dataops-metric-data)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>单条 </strong>请求内部地址</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST http://prod-dataops-pmdb.sreworks-dataops.svc.cluster.local:80/metric_instance/pushMetricData</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>body参数</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// JSON对象类型 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: 1640966400000,   // 时间戳ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;labels&quot;: {},                 // 指标labels,指标实例会自动添加指标定义标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;value&quot;: 1.0                  // 指标值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}   </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>批量(</strong>单次最大1000条<strong>) </strong>请求内部地址</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST http://prod-dataops-pmdb.sreworks-dataops.svc.cluster.local:80/metric_instance/pushMetricDatas</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><br>URL请求参数 ``` isDeleteOldIns   // 是否删除不在本次录入范围的指标实例 ```<p>body参数</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// JSON数组对象类型 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;timestamp&quot;: 1640966400000,   // 时间戳ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;labels&quot;: {},                 // 指标labels,指标实例会自动添加指标定义标签</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;value&quot;: 1.0                  // 指标值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}]  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><a name="vLTOn"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="412-应用健康定义">4.1.2 应用健康定义<a class="hash-link" href="#412-应用健康定义" title="标题的直接链接">​</a></h4><p>健康定义页面可以开启内置POD事件/POD状态的健康定义。开启后会针对POD运维事件进行采集，同时会针对应用POD不可用状态数量进行应用健康管理。如需对应用进行健康配置管理，请移步<strong>健康管理服务</strong>。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179534203-b0bb7b69-9854-4be8-b33b-a0b674ffde46-bfd7eb296005c7772ffd581e2560fa90.png" width="1798" height="927" class="img_ev3q"></p><a name="IDa9r"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="413-应用可观测数据采集">4.1.3 应用可观测数据采集<a class="hash-link" href="#413-应用可观测数据采集" title="标题的直接链接">​</a></h4><p><strong>指标：</strong>应用定义页面打开指标采集，会自动在应用实例POD添加标签 <strong>kubernetes.labels.sreworks-telemetry-metric: enable </strong>添加该标签实例会自动采集POD基础资源指标和POD状态指标数据</p><p><strong>日志：</strong>应用定义页面打开日志采集， 会自动在应用实例POD添加标签 <strong>kubernetes.labels.sreworks-telemetry-log: enable </strong>添加该标签实例会自动采集POD产生的日志数据，默认按照时间切分日志行<br>eg:<!-- -->[2022-03-10 09:06:21]<!-- --> or 2022-03-10 09:06:21</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179534366-a7ad9618-b73d-43af-814d-77fe312829cf-290182f381587e2313519f8f07bc89cc.png" width="942" height="139" class="img_ev3q"></p><p><strong>追踪：</strong>建议先阅读<a href="https://skywalking.apache.org/docs/" target="_blank" rel="noopener noreferrer">Skywalking官方使用文档</a>，按照应用开发语言下载对应的skywalking-agent(这里以java为例，参考demoApp配置)：<br>a.<a href="https://skywalking.apache.org/docs/skywalking-java/v8.8.0/en/setup/service-agent/java-agent/readme/" target="_blank" rel="noopener noreferrer">trace采集配置</a><br>b.<a href="https://skywalking.apache.org/docs/skywalking-java/v8.8.0/en/setup/service-agent/java-agent/application-toolkit-logback-1.x/" target="_blank" rel="noopener noreferrer">log和trace关联配置</a><br>以上两部分配置成功后，即可将应用的可观测数据采集到SREWorks平台，进行管理。<br>  </p><a name="gpjYM"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="414-应用运维运营数据采集">4.1.4 应用运维运营数据采集<a class="hash-link" href="#414-应用运维运营数据采集" title="标题的直接链接">​</a></h4><p>依托作业平台，利用采集场景作业实现数据采集加工，关联<strong>数据仓库</strong>和<strong>指标服务。</strong><br>1.基础运维数据：<br><strong>质量：</strong>自动采集健康服务下应用的健康定义、健康实例等数据，并按照应用进行质量数据汇总<br><strong>成本：</strong>自动按照应用维度采集每个POD的资源使用成本，并按照应用进行成本数据汇总<br><strong>效率：</strong>自动采集应用的构建部署操作等数据，并按照应用进行效率数据汇总<br>应用的资源计价模型维护在<strong>数仓DIM =&gt;运维服务主题 =&gt;成本域=&gt;RESOURCE_PRICE, </strong>用户可根据实际情况在系统设置中配置默认的资源计价。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179534642-572a2708-3b51-4414-8d28-9671d3d9c411-394b329cd0339fceec92862cb9590900.png" width="1900" height="585" class="img_ev3q"></p><p>2.自定义业务数据：<br>用户按需创建具体的采集场景作业，采集数据到数仓。</p><a name="qZrcO"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="42-应用数据化管理">4.2 应用数据化管理<a class="hash-link" href="#42-应用数据化管理" title="标题的直接链接">​</a></h3><a name="knO9C"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="421-应用实例事件详情">4.2.1 应用实例事件详情<a class="hash-link" href="#421-应用实例事件详情" title="标题的直接链接">​</a></h4><p>开启内置健康定义的应用定义，在应用实例的事件详情页可以看到，当前应用实例的POD运维事件。如果用户创建了其他事件定义，同样可以看到自定义的应用事件实例。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179534979-c3775d77-048f-4bd9-82fa-265403ea3ea8-eb63642e4fea14ca28c01a15cc7734f2.png" width="1811" height="554" class="img_ev3q"></p><a name="Px0RU"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="422-应用实例健康详情">4.2.2 应用实例健康详情<a class="hash-link" href="#422-应用实例健康详情" title="标题的直接链接">​</a></h4><p>应用实例的健康（风险、告警、异常、故障）看板。通过该页面可以细粒度的看到应用的健康概览数据、详情数据以及健康趋势图。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179535222-739dcaa0-1d0d-4288-967c-13a638dbef09-a24bf70541e7e95a1200582165b1d83e.png" width="1812" height="1300" class="img_ev3q"></p><a name="AnSKy"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="423-应用实例指标详情">4.2.3 应用实例指标详情<a class="hash-link" href="#423-应用实例指标详情" title="标题的直接链接">​</a></h4><p>应用实例指标列表和指标时序曲线查看</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179535418-e42bde8d-dc13-4c7e-926b-8ab351057539-2e85692558ca5b6aab56a5dd878faab4.png" width="1803" height="652" class="img_ev3q"></p><a name="OhdUv"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="424-应用实例日志详情">4.2.4 应用实例日志详情<a class="hash-link" href="#424-应用实例日志详情" title="标题的直接链接">​</a></h4><p>应用实例日志数据，支持按照追踪ID和日志关键字进行过滤。如需查看日志详情，请通过日志列表右上角grafana链接跳转到日志explore面板(user:admin  passwd:sreworks123456)</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179535573-99650f6e-3df2-4e22-b33a-2727679bf5c4-ec959e1def55959a2189133bdc2f0872.png" width="1826" height="643" class="img_ev3q"></p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179535744-095463c2-fa13-4d5f-a34b-e3d8b53051ce-885b5faaa8e283f2a9027c291b65a5ea.png" width="2484" height="537" class="img_ev3q"></p><a name="J14xQ"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="425-应用实例追踪详情">4.2.5 应用实例追踪详情<a class="hash-link" href="#425-应用实例追踪详情" title="标题的直接链接">​</a></h4><p>应用实例追踪数据，可根据追踪ID跳转SkyWalking UI页面，进行追踪详情查询。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179536026-5cda564c-6806-410a-944b-49c72360ea5e-6fbe7ff4c2a7782c7328f2adb6cb65fe.png" width="1814" height="645" class="img_ev3q"></p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179536206-d2985fe5-a223-44b1-b157-ecd89896ee29-be25000a61c95b4d21852935f09341a4.png" width="1264" height="509" class="img_ev3q"></p><a name="Vp1WF"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="5-应用健康管理和故障自愈">5 应用健康管理和故障自愈<a class="hash-link" href="#5-应用健康管理和故障自愈" title="标题的直接链接">​</a></h2><a name="LgkIS"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="51-健康管理">5.1 健康管理<a class="hash-link" href="#51-健康管理" title="标题的直接链接">​</a></h3><a name="S5pQe"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="511-健康主页">5.1.1 健康主页<a class="hash-link" href="#511-健康主页" title="标题的直接链接">​</a></h4><p>健康服务汇总看板</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179536361-91b12e4a-ff81-473e-ba0e-362c4ad81546-32387c7122d1d7de2d7d88858ba1b5d1.png" width="1833" height="1197" class="img_ev3q"></p><a name="ZoO0C"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="512-事件管理">5.1.2 事件管理<a class="hash-link" href="#512-事件管理" title="标题的直接链接">​</a></h4><p>事件定义和事件实例的管理页面，事件定义需要关联到应用定义。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179536522-b27b0a3f-d908-46e9-92d9-911b1789734c-fdb73c595b3d945cf37c0ab344caf212.png" width="1829" height="520" class="img_ev3q"></p><a name="OoSQh"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="513-风险管理">5.1.3 风险管理<a class="hash-link" href="#513-风险管理" title="标题的直接链接">​</a></h4><p>风险定义和风险实例的管理页面，风险定义需要关联到应用定义。启用状态的风险可以关联巡检作业，产出风险实例。同时可以对风险定义配置权重值(0-10)，用于应用健康分计算。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179536774-3010005a-ed1a-417f-b33b-2143d522e186-e08a6d9d066cacc4f02e46ad44acc40f.png" width="1824" height="592" class="img_ev3q"></p><p>风险巡检页面，创建巡检场景作业，关联多个巡检项，巡检项可以绑定到具体的风险定义(启用状态)，满足条件即可产出对应的风险实例。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179536970-4352a959-7e6f-49ff-b328-dfc11bee06b0-89eb5c82b87c5b9ad8d0508830c463d9.png" width="1814" height="438" class="img_ev3q"><br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179537136-bc6ad29e-56dd-4fb6-9588-24f5c9727154-edd55c037031ee26a16783e8e016cbcc.png" width="1488" height="424" class="img_ev3q"><br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179537309-e0096a60-7055-460c-99fb-d75f76bafc88-9e772f74d2a86776825751fab2b99e17.png" width="1624" height="419" class="img_ev3q"></p><a name="zzAKO"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="514-告警管理">5.1.4 告警管理<a class="hash-link" href="#514-告警管理" title="标题的直接链接">​</a></h4><p>告警定义和告警实例的管理页面，告警定义需要关联到应用定义。当告警定义处于启用状态时， 告警定义绑定的指标会通过阈值检测服务，根据告警规则产出告警实例。同时可以对告警定义配置权重值(0-10)，用于应用健康分计算。说明，故障定义规则，生效时间在30min左右(flink维表缓存时长)。此外，当前版本暂不支持告警消息推送，后续会开放支持。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179537466-f537b795-27e5-45ef-829a-878cbb78cfb4-7597ec7303ba010bbe60fce82f670b6d.png" width="1810" height="545" class="img_ev3q"><br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179537668-fd17f3b1-2b81-4478-9047-265b7eb6fcc5-c7957499566469967456557007477c07.png" width="1796" height="339" class="img_ev3q"><br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179537827-b552bc6d-0fa4-4aeb-a508-320e5f8a7476-a78d8b7db3c35aebaedf80412908cc94.png" width="1345" height="760" class="img_ev3q"></p><p>告警分析页面，创建告警分析场景作业，可以订阅启用状态的告警，该作业绑定的分析项可以获取订阅告警产出的告警实例，进行告警数据分析。同时告警分析项可以关联下游的异常，当满足条件时，产出对应的异常实例（下游异常实例通过关键字nextIncident标识）。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179537989-c1fb7296-26e7-416f-a19d-aaf7d4b007f6-7af1a3f8998acf49b402d0a9f0a20e73.png" width="1455" height="430" class="img_ev3q"></p><p>告警实例放在环境变量varConfPath<br>python脚本为例，</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 获取方式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;varConfPath&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 回写方式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;varConfPath&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;w&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179538179-b336aa01-7fc2-4783-a536-fc9e6256562a-9cdc193579058f33f960126daae1846d.png" width="1885" height="1237" class="img_ev3q"></p><a name="MN4ZI"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="515-异常管理">5.1.5 异常管理<a class="hash-link" href="#515-异常管理" title="标题的直接链接">​</a></h4><p>异常定义和异常实例的管理页面，异常定义需要关联到应用定义。开箱内置不可用异常类型。异常定义可以配置是否支持自愈，支持自愈的异常表示可以进行故障自愈。同时可以对异常定义配置权重值(0-10)，用于应用健康分计算。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179538419-4248e433-e42f-4576-9a02-0d6939e125eb-7938f764fc1170ede21797996693f8e7.png" width="1834" height="583" class="img_ev3q"><br><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179538618-76c6867b-b9c1-4647-b1da-e5334da758d7-017ca183e58ab1f3e77e12be83a78b42.png" width="1841" height="424" class="img_ev3q"></p><p>异常诊断页面，开启自愈的异常可以被诊断场景作业订阅，该作业绑定的诊断项可以获取订阅异常产生的异常实例，进行异常实例诊断。同时诊断项可以关联下游的异常，当满足条件时，产出对应的异常实例（下游异常实例通过关键字nextIncident标识，当前异常实例通过关键字currentIncident标识）。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179538809-0d9ef317-73ea-46fa-9e57-834c308006d3-09b715e000f6a59869528d8b03ac086f.png" width="1843" height="514" class="img_ev3q"></p><p>异常实例放在环境变量varConfPath<br>python脚本为例，</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># 获取方式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;varConfPath&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 回写方式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;varConfPath&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;w&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dumps</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179539013-67bfdec8-ac08-4d9b-a645-e39da2ea1312-40a057088fbf0177eeedd1c5ba533241.png" width="1678" height="868" class="img_ev3q"></p><p>开启自愈的异常实例，存在如下五种状态<br># WAITING 等待自愈状态 （新产生异常实例首先进入等待自愈状态）<br># RUNNING 自愈中<br># FAILURE 自愈失败<br># SUCCESS 自愈成功<br># CANCEL 自愈任务取消<br>用户可以结合实际情况对异常实例状态进行合理轮转</p><a name="dpzhX"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="516-故障管理">5.1.6 故障管理<a class="hash-link" href="#516-故障管理" title="标题的直接链接">​</a></h4><p>故障定义和故障实例的管理页面，故障定义需要关联到应用定义。故障实例由其关联异常实例，满足故障条件后自动产出。按照异常持续时间，平台内置P4～P0(由低到高)五级故障，用户可以结合异常的重要性进行合理配置。说明，故障定义规则同告警规则一样，生效时间在30min左右(flink维表缓存时长)。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179539190-be553c22-8c94-41ba-a6eb-d7e3a515e99f-55ba346cca03285afffd30bef9175cb6.png" width="2202" height="733" class="img_ev3q"></p><a name="nG4ed"></a><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="517-应用健康分">5.1.7 应用健康分<a class="hash-link" href="#517-应用健康分" title="标题的直接链接">​</a></h4><p>应用健康分(满分100)采用扣分项机制，根据应用实例关联的健康实例(风险、告警、异常)，结合权重系数和影响因子，计算每个扣分项，最终计算得到每个实例的健康分值。</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179539372-aec3fbc9-74d7-47e5-85ee-05507cf6d3b8-aaaa9e8a31cf83c2621526a5661829d3.png" width="760" height="415" class="img_ev3q"></p><a name="HRFNG"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="52-故障自愈">5.2 故障自愈<a class="hash-link" href="#52-故障自愈" title="标题的直接链接">​</a></h3><p>自愈任务链的统计数据和自愈任务详情数据</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179539619-d2f30ac7-c8cc-46e8-9f05-2a0c64a4b116-5ee765838732b2fcc386feabd36df8c5.png" width="1793" height="685" class="img_ev3q"></p><a name="AplSh"></a><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="6-应用运营管理">6 应用运营管理<a class="hash-link" href="#6-应用运营管理" title="标题的直接链接">​</a></h2><p>运营中心按照应用实例从质量、成本、效率三个维度，分别进行数据统计汇总</p><a name="rWUtf"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="61-运营中心概览">6.1 运营中心概览<a class="hash-link" href="#61-运营中心概览" title="标题的直接链接">​</a></h3><p>概览页面，按照质量、成本、效率三个维度，汇总上层指标数据，<br>健康：健康分和服务可用率，以及健康实例的统计数据<br>成本：应用的占比和资源用量统计<br>效率：应用人效比和构建部署数据统计</p><p><img loading="lazy" alt="image.png" src="/docs/zh/assets/images/1648179539800-d676518b-72e2-4afe-8e06-bf400acefbff-34f47d98aef53afab745f17946f55139.png" width="2534" height="960" class="img_ev3q"></p><a name="zjZ5v"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="62-应用质量运营管理">6.2 应用质量运营管理<a class="hash-link" href="#62-应用质量运营管理" title="标题的直接链接">​</a></h3><p>应用实例每日新增风险、告警、异常以及故障实例趋势图</p><a name="rxIBz"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="63-应用成本运营管理">6.3 应用成本运营管理<a class="hash-link" href="#63-应用成本运营管理" title="标题的直接链接">​</a></h3><p>应用实例每日平均资源水位趋势图</p><a name="aOySq"></a><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="64-应用效率运营管理">6.4 应用效率运营管理<a class="hash-link" href="#64-应用效率运营管理" title="标题的直接链接">​</a></h3><p>应用每日构建部署成功率趋势图</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://www.yuque.com/sreworks-doc/docs/ii05yo" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/zh/docs/next/moptgx"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">4.1.3 企业资源管理</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/zh/docs/next/uopmre"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">4.2.1 什么是运维应用</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-应用开发" class="table-of-contents__link toc-highlight">1 应用开发</a><ul><li><a href="#11-新建应用模板" class="table-of-contents__link toc-highlight">1.1 新建应用模板</a></li><li><a href="#12-添加应用组件" class="table-of-contents__link toc-highlight">1.2 添加应用组件</a></li><li><a href="#13-应用构建" class="table-of-contents__link toc-highlight">1.3 应用构建</a></li><li><a href="#14-应用测试部署" class="table-of-contents__link toc-highlight">1.4 应用测试部署</a></li><li><a href="#15-应用发布" class="table-of-contents__link toc-highlight">1.5 应用发布</a></li></ul></li><li><a href="#2-应用市场" class="table-of-contents__link toc-highlight">2 应用市场</a><ul><li><a href="#21-应用部署" class="table-of-contents__link toc-highlight">2.1 应用部署</a></li><li><a href="#22-应用下架" class="table-of-contents__link toc-highlight">2.2 应用下架</a></li></ul></li><li><a href="#3-应用中心" class="table-of-contents__link toc-highlight">3 应用中心</a><ul><li><a href="#31-应用实例列表" class="table-of-contents__link toc-highlight">3.1 应用实例列表</a></li><li><a href="#32-应用实例详情" class="table-of-contents__link toc-highlight">3.2 应用实例详情</a></li></ul></li><li><a href="#4-应用数据化配置管理" class="table-of-contents__link toc-highlight">4 应用数据化配置管理</a><ul><li><a href="#41-应用数据化配置" class="table-of-contents__link toc-highlight">4.1 应用数据化配置</a><ul><li><a href="#411-应用指标定义" class="table-of-contents__link toc-highlight">4.1.1 应用指标定义</a></li><li><a href="#412-应用健康定义" class="table-of-contents__link toc-highlight">4.1.2 应用健康定义</a></li><li><a href="#413-应用可观测数据采集" class="table-of-contents__link toc-highlight">4.1.3 应用可观测数据采集</a></li><li><a href="#414-应用运维运营数据采集" class="table-of-contents__link toc-highlight">4.1.4 应用运维运营数据采集</a></li></ul></li><li><a href="#42-应用数据化管理" class="table-of-contents__link toc-highlight">4.2 应用数据化管理</a><ul><li><a href="#421-应用实例事件详情" class="table-of-contents__link toc-highlight">4.2.1 应用实例事件详情</a></li><li><a href="#422-应用实例健康详情" class="table-of-contents__link toc-highlight">4.2.2 应用实例健康详情</a></li><li><a href="#423-应用实例指标详情" class="table-of-contents__link toc-highlight">4.2.3 应用实例指标详情</a></li><li><a href="#424-应用实例日志详情" class="table-of-contents__link toc-highlight">4.2.4 应用实例日志详情</a></li><li><a href="#425-应用实例追踪详情" class="table-of-contents__link toc-highlight">4.2.5 应用实例追踪详情</a></li></ul></li></ul></li><li><a href="#5-应用健康管理和故障自愈" class="table-of-contents__link toc-highlight">5 应用健康管理和故障自愈</a><ul><li><a href="#51-健康管理" class="table-of-contents__link toc-highlight">5.1 健康管理</a><ul><li><a href="#511-健康主页" class="table-of-contents__link toc-highlight">5.1.1 健康主页</a></li><li><a href="#512-事件管理" class="table-of-contents__link toc-highlight">5.1.2 事件管理</a></li><li><a href="#513-风险管理" class="table-of-contents__link toc-highlight">5.1.3 风险管理</a></li><li><a href="#514-告警管理" class="table-of-contents__link toc-highlight">5.1.4 告警管理</a></li><li><a href="#515-异常管理" class="table-of-contents__link toc-highlight">5.1.5 异常管理</a></li><li><a href="#516-故障管理" class="table-of-contents__link toc-highlight">5.1.6 故障管理</a></li><li><a href="#517-应用健康分" class="table-of-contents__link toc-highlight">5.1.7 应用健康分</a></li></ul></li><li><a href="#52-故障自愈" class="table-of-contents__link toc-highlight">5.2 故障自愈</a></li></ul></li><li><a href="#6-应用运营管理" class="table-of-contents__link toc-highlight">6 应用运营管理</a><ul><li><a href="#61-运营中心概览" class="table-of-contents__link toc-highlight">6.1 运营中心概览</a></li><li><a href="#62-应用质量运营管理" class="table-of-contents__link toc-highlight">6.2 应用质量运营管理</a></li><li><a href="#63-应用成本运营管理" class="table-of-contents__link toc-highlight">6.3 应用成本运营管理</a></li><li><a href="#64-应用效率运营管理" class="table-of-contents__link toc-highlight">6.4 应用效率运营管理</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/zh/docs/rr5g10">快速安装</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/zh/docs/eg91va">核心思想</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/zh/docs/cirgod">数智运维</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/alibaba/sreworks/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><div class="wechat"> <span class="wechat-label">钉钉交流群</span> <a class="wechat-img" rel="noreferrer noopener" aria-label="DingTalk Group"><img src="https://sreworks.oss-cn-beijing.aliyuncs.com/logo/ding.jpg"></a></div></li><li class="footer__item"><div class="wechat"> <span class="wechat-label">微信交流群</span> <a class="wechat-img" rel="noreferrer noopener" aria-label="Wechat Group"><img src="https://sreworks.oss-cn-beijing.aliyuncs.com/logo/weixin-helper.jpg" alt="Broker wechat to add you into the user group."></a></div></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 SREWorks | 浙公网安备: 33010002000092号 | ICP备案网站信息: 浙B2-20120091-4</div></div></div></footer></div>
<script src="/docs/zh/assets/js/runtime~main.96b37710.js"></script>
<script src="/docs/zh/assets/js/main.80684ee5.js"></script>
</body>
</html>